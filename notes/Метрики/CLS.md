Описание

CLS — это показатель по временному окну с максимальными оценками смещения макета для каждого неожиданного смещения макета, которые происходят в течение всего времени жизни страницы. Смещение макета происходит каждый раз, когда видимый элемент меняет свое положение от одного отрисованного фрейма к другому. Пример [https://sentry.samoletgroup.ru/organizations/sentry/performance/?project=72](https://sentry.samoletgroup.ru/organizations/sentry/performance/?project=72)

_Как считаем_

Забираем из Sentry через API

_Что дает_

Видим как часто такие проблемы со смещением макета страницы случаются у реальных пользователей.

_Как влиять_

Рефакторинг frontend и исправлять ситуации приведшие к 

- асинхронной загрузки ресурсов
- динамическому добавлению элементов DOM к странице поверх уже существующего контента

Рекомендации по исправлению ситуации

- Всегда следует включать атрибуты размеров для изображений и видеоэлементов или иным образом резервировать необходимое пространство с помощью, например, CSS-свойства aspect-ratio. Такой подход гарантирует, что браузер сможет выделить правильный объем места в документе во время загрузки изображения. Кроме того, можно также применять политику функции unized-media, чтобы принудительно использовать это поведение в браузерах, поддерживающих политики функций.
- Никогда не следует вставлять контент поверх существующего, кроме случаев, когда это требуется в ответ на взаимодействие с пользователем. Это гарантирует, что любые изменения макета будут ожидаемыми.
- Лучше выбирать анимацию трансформации, чем анимацию изменения свойств, запускающих изменение макета. Нужно анимировать переходы таким образом, чтобы обеспечить контекст и непрерывность от состояния к состоянию.