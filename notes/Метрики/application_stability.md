_Описание_

Метрика основанная на соотношении количества "пятисотых" http кодов возврата к общему количеству кодов возвтрата. Данные берутся из логов фронтенда в loki.

Данная метрика ничего не говорит нам о времени недоступности приложения, поэтому мониторим время недоступности приложений с помощью какой-нибудь внешней системы (Kuma, в процессе тестирования)

В grafana так же есть попытка визуализировать эту метрику, но она отрисовывается не совсем корректно в связи со спецификой данных, возвращаемых loki: [https://grafana-prod.samoletgroup.ru/d/tS2fwYA4z/product-stability-and-containers-sla-by-readiness-status?orgId=1](https://grafana-prod.samoletgroup.ru/d/tS2fwYA4z/product-stability-and-containers-sla-by-readiness-status?orgId=1)

_Как считаем_

На данный момент рассчитывается как 1 – (count_500/total_count*100), т.е. представляет собой просто процент непятисотых кодов за последние 7 дней.

Предлагается считать эту метрику в виде SLA: определять допустимый порог пятисотых и вычислять время, в течение которого данный порог не был превышен.

_Что дает_

Отображает изменение соотношения 500ых к 200ым. Таким образом можем понять, насколько стабильно приложение. Если 500ых слишком много, этому есть причина, отобразится на графике

_Как влиять_

Выкатывать стабильный код, проводить регресс перед выкаткой на прод, использовать все процессы в рамках Playbook и текущих технологий компании.